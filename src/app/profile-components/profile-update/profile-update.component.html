<div class="relative full-width">
  <!-- Breadcrumb -->
  <div class="container-web relative">
    <div class="container">
      <div class="col-md-12">
        <div class="row">
          <div class="breadcrumb-web">
            <ul class="clear-margin">
              <li class="animate-default title-hover-red"><a href="javascript:void(0)" [routerLink]="['/']">Home</a></li>
              <li class="animate-default title-hover-red"><a href="javascript:void(0)" [routerLink]="['/customer']">My Account</a></li>
              <li class="animate-default current">Edit Account Information</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="relative container-web text-intro bottom-margin-default">
    <div class="container">
      <div class="row">
        <div class="col-md-12 bottom-margin-default">
          <h3><strong>Edit Account Information</strong></h3>
        </div>
      </div>
      <div class="row">
        <dashboard-customer-left-menu></dashboard-customer-left-menu>
        <div class="col-md-9 col-sm-8 col-xs-12">
          <div class="customer-detail-block">
            <form class="tsb-form edit-account-form" (ngSubmit)="f.form.valid && ngSubmit()" #f="ngForm" novalidate>
              <div class="">
                <h4><strong>Account Information</strong></h4>
                <div class="upload-pic-holder">
                  <div class="upload-image-holder">
                    <img [src]="profileImage" (error)="DefaultImg()" class="avatar img-circle img-thumbnail" alt="avatar">
                  </div>
                  <div class="upload-text-holder">
                    <a (click)="openModal(template)" href="javascript:void(0)">Upload Your Profile Picture</a>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6 col-xs-12">
                    <div class="form-group">
                      <input type="text" class="form-control" name="firstName" placeholder="First Name" [(ngModel)]="customerModel.firstName" #firstName="ngModel" [ngClass]="{ 'is-invalid': f.submitted && firstName?.invalid }" required>
                      <div *ngIf="(f.submitted) && firstName?.invalid" class="invalid-feedback">
                        <div *ngIf="firstName.errors.required"><span class="text-danger">First Name is required</span></div>
                      </div>
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="lastName" placeholder="Last Name" [(ngModel)]="customerModel.lastName" #lastName="ngModel" [ngClass]="{ 'is-invalid': f.submitted && lastName?.invalid }" required>
                      <div *ngIf="(f.submitted) && lastName?.invalid" class="invalid-feedback">
                        <div *ngIf="lastName.errors.required"><span class="text-danger">Last Name is required</span></div>
                      </div>
                    </div>
                    <div class="form-group input-daterange" data-provide="datepicker">
                      <input type="text" class="form-control" [maxDate]="maxDate" (bsValueChange)="selectBirthDate($event)" name="birthDate" id="dateOfBirth" placeholder="Date of birth" [(ngModel)]="customerModel.birthDate" #birthDate="ngModel" [ngClass]="{ 'is-invalid': f.submitted && birthDate.invalid }" bsDatepicker>
                      <!--<div *ngIf="(f.submitted) && birthDate?.invalid" class="invalid-feedback">
                        <div *ngIf="birthDate.errors.required">
                          <span class="text-danger">
                            Date of birth is required
                          </span>
                        </div>
                      </div>-->
                    </div>
                    <div class="form-group">
                      <input type="number" class="form-control" name="mobilePhone" placeholder="Contact Number" [(ngModel)]="customerModel.mobilePhone" #mobilePhone="ngModel" [ngClass]="{ 'is-invalid': f.submitted && mobilePhone?.invalid }" required>
                      <div *ngIf="(f.submitted) && mobilePhone?.invalid" class="invalid-feedback">
                        <div *ngIf="mobilePhone.errors.required"><span class="text-danger">Contact Number is required</span></div>
                      </div>
                    </div>
                    <div class="form-group">
                      <input type="number" class="form-control" name="primaryPhone" placeholder="Primary Phone" [(ngModel)]="customerModel.primaryPhone" #primaryPhone="ngModel">
                    </div>
                  </div>
                  <div class="col-md-6 col-xs-12">
                    <div class="form-group">
                      <input type="text" class="form-control" name="middleName" placeholder="Middle Name" [(ngModel)]="customerModel.middleName" #middleName="ngModel">
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="company" placeholder="Company" [(ngModel)]="customerModel.company" #company="ngModel">
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control"
                             name="email"
                             (keypress)="KeyPressEvenet()"
                             (focusout)="IsUniqueEmail()"
                             placeholder="Email Address"
                             [(ngModel)]="customerModel.email"
                             #email="ngModel"
                             pattern="[^@]+@[^@]+\.[a-zA-Z]{2,6}"
                             [ngClass]="{ 'is-invalid': f.submitted && email?.invalid }" required>
                      <div *ngIf="(f.submitted || email?.touched) && email?.invalid" class="invalid-feedback">
                        <div *ngIf="email.errors.required"><span class="text-danger">Email Address is required</span></div>
                        <div *ngIf="email.errors?.pattern"><span class="text-danger">Email is invalid</span></div>
                      </div>
                      <div class="invalid-feedback" *ngIf="email?.touched && !isUnique"><span class="text-danger">Email already exists</span></div>
                    </div>

                    <div class="form-group">
                      <input type="number" class="form-control" name="secondaryPhone" placeholder="Secondary Phone" [(ngModel)]="customerModel.secondaryPhone" #secondaryPhone="ngModel">
                    </div>
                    <div class="form-group">
                        <input type="radio" value="male" name="gender" [(ngModel)]="customerModel.gender" #gender="ngModel"> Male                     
                        <input type="radio" value="female" name="gender" [(ngModel)]="customerModel.gender" #gender="ngModel"> Female
                    </div>
                  </div>
                </div>
              </div>
              <hr />
              <div class="row">
                <div class="col-xs-6">
                  <!--<input class="tsb-btn" onclick="window.location.href='/customer'" type="submit" value="Go Back">
                  <a class="tsb-btn" [routerLink]="['/customer']">Go Back</a>-->
                </div>
                <div class="col-xs-6 text-right">
                  <input class="tsb-btn" type="submit" value="Save">
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Profile Picture</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form name="form" (ngSubmit)="f.form.valid && confirm()" #f="ngForm" novalidate>
      <div class="form-group">
        <div class="row">
          <div class="col-sm-12">
            <input type="file" (change)="fileChangeEvent($event)" />
            <image-cropper [imageChangedEvent]="imageChangedEvent"
                           [maintainAspectRatio]="true"
                           [aspectRatio]="4 / 3"
                           [resizeToWidth]="128"
                           format="png"
                           (imageCroppedBase64)="imageCroppedBase64($event)"
                           (imageLoaded)="imageLoaded()"
                           (loadImageFailed)="loadImageFailed()"></image-cropper>

            <img [src]="croppedImage" />
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="row">
          <div class="col-sm-12">
            <button class="btn btn-primary"><i class="fa fa-save"></i> Save</button>
            <button type="button" class="btn btn-default" (click)="decline()">Cancel</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</ng-template>
